---
import IconPodcast from './Icons/IconPodcast.astro'
---

<span class="container no-print" title="Hear about me">
  <IconPodcast />
  <audio controls style="display: none" id="podcast-audio">
    <source src="/me/podcast.mp3" type="audio/mpeg" />
  </audio>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.querySelector('.container') as HTMLDivElement
      const audio = document.getElementById('podcast-audio') as HTMLAudioElement
      if (container && audio) {
        container.addEventListener('click', () => {
          if (audio.paused) {
            container.classList.add('playing')
            audio.play()
          } else {
            container.classList.remove('playing')
            audio.pause()
          }
        })
      }
    })
  </script>

  <style>
    .container {
      position: fixed;
      bottom: 3em;
      right: 3em;
      background-color: light-dark(#727070, white);
      color: light-dark(white, black);
      border-radius: 20%;
      width: 3.5em;
      height: 3em;
      display: grid;
      place-content: center;
      cursor: pointer;
      opacity: 1;
      transition: all 0.3s;

      &:hover,
      &.playing {
        opacity: 0.8;
        animation: playing 1.2s infinite;
      }
    }

    @keyframes playing {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }
  </style>
</span>
