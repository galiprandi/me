---
import IconPodcast from './Icons/IconPodcast.astro'
---

<span class="container no-print" title="Hear about me">
  <IconPodcast />
  <audio controls style="display: none" id="podcast-audio">
    <source src="/me/podcast.mp3" type="audio/mpeg" />
  </audio>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.querySelector('.container') as HTMLDivElement
      const audio = document.getElementById('podcast-audio') as HTMLAudioElement
      if (container && audio) {
        container.addEventListener('click', () => {
          if (audio.paused) {
            container.classList.add('playing')
            audio.play()
          } else {
            container.classList.remove('playing')
            audio.pause()
          }
        })
      }
    })
  </script>

  <style>
    .container {
      position: fixed;
      bottom: 3em;
      right: 3em;
      background-color: light-dark(black, white);
      color: light-dark(white, black);
      border-radius: 20%;
      width: 3.5em;
      height: 3em;
      display: grid;
      place-content: center;
      cursor: pointer;
      opacity: 0.3;
      transition: all 0.3s;

      &:hover {
        opacity: 0.6;
      }
    }

    .playing {
      animation: pulse 1.2s infinite;
      opacity: 0.6;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.4);
        opacity: 0.6;
      }
      90% {
        box-shadow: 0 0 0 0.7em rgba(0, 0, 0, 0);
        opacity: 0.7;
      }
      100% {
        box-shadow: 0 0 0 0.7em rgba(0, 0, 0, 0);
        opacity: 0.7;
      }
    }
  </style>
</span>
